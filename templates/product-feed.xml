<?xml version="1.0" encoding="UTF-8"?> 
<rss version="2.0" xmlns:g="http://base.google.com/ns/1.0">
  <channel>
    <title>Hurtrock Music Store</title>
    <link>https://www.hurtrock-store.com</link>
    <description>Produk alat musik berkualitas dari Hurtrock Music Store</description>
    <lastBuildDate>{{ current_date }}</lastBuildDate>

    {% for p in products %}
    <item>
      <g:id>{{ p.id }}</g:id>
      <title><![CDATA[{{ p.name }}]]></title>
      <link>https://www.hurtrock-store.com/produk/{{ p.slug }}</link>
      <description><![CDATA[{{ p.description or p.name }}]]></description>

      {% if p.image_url %}
      <g:image_link>https://www.hurtrock-store.com/{{ p.image_url.lstrip('/') }}</g:image_link>
      {% endif %}

      <g:brand><![CDATA[{{ p.brand or "Hurtrock" }}]]></g:brand>
      <g:condition>new</g:condition>

      {% if p.price %}
      <g:price>{{ "%.2f"|format(p.price) }} IDR</g:price>
      {% endif %}

      <g:availability>
        {% if p.stock_quantity and p.stock_quantity > 0 %}
          in stock
        {% else %}
          out of stock
        {% endif %}
      </g:availability>

      {# Hitung berat produk + tambahan packing kayu #}
      {% set base_weight = p.weight or 4000 %}
      {% set packing_extra = p.packing_weight_extra or 0 %}
      <g:shipping_weight>{{ "%.2f"|format(base_weight + packing_extra) }} g</g:shipping_weight>
    </item>
    {% endfor %}
  </channel>
</rss>
